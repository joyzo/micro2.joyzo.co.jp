# kintoneアプリ作成ガイド

このドキュメントでは、kintoneアプリの作成手順を説明します。

## 方法1: GUIで手動作成（推奨）

### 1. サイトニュース管理アプリの作成

1. kintoneにログインし、アプリ一覧から「アプリを追加」をクリック
2. 「アプリを新規作成」を選択
3. アプリ名を「サイトニュース管理」に設定
4. 以下のフィールドを順番に追加：

| フィールド名 | フィールドコード | 種類 | 必須 | 説明 |
|------------|---------------|------|------|------|
| タイトル | `title` | 文字列（1行） | ✓ | ニュース記事のタイトル |
| 本文 | `content` | リッチエディタ | ✓ | ニュース記事の本文 |
| 概要 | `overview` | 文字列（複数行） | - | 記事の概要 |
| リリース日 | `release_date` | 日時 | ✓ | 公開日時 |
| 公開日 | `publishedAt` | 日時 | - | 公開日時（表示用） |
| サムネイル画像 | `thumbnail` | ファイル | - | 一覧表示用 |
| アイキャッチ画像 | `eyecatch` | ファイル | - | 詳細ページ用 |
| 画像 | `image` | ファイル | - | 画像（代替） |
| タグ | `tag` | ドロップダウン | - | 記事のカテゴリ |
| 公開 | `publish` | チェックボックス | ✓ | 公開環境（開発、本番） |
| microCMS ID | `microcms_id` | 文字列（1行） | - | microCMSのID |
| 投稿ID | `id` | 文字列（1行） | ✓ | 投稿ID（自動採番） |

5. タグフィールドの選択肢を設定：
   - ニュース
   - イベント
   - リリース
   - メンテナンス
   - メディア
   - アップデート

6. 公開フィールドの選択肢を設定：
   - 開発
   - 本番

7. 自動採番プラグインをインストールして、`id`フィールドに自動採番を設定

8. ビューを設定：
   - ビュー名: 「すべて」
   - 表示フィールド: タイトル、リリース日、公開、タグ
   - 並び順: リリース日の降順

### 2. 固定ページ管理アプリの作成

1. アプリ一覧から「アプリを追加」をクリック
2. 「アプリを新規作成」を選択
3. アプリ名を「固定ページ管理」に設定
4. 以下のフィールドを順番に追加：

| フィールド名 | フィールドコード | 種類 | 必須 | 説明 |
|------------|---------------|------|------|------|
| ページ識別子 | `page_id` | 文字列（1行） | ✓ | ページを識別するID |
| ページ名 | `page_name` | 文字列（1行） | ✓ | ページ名 |
| タイトル | `title` | 文字列（1行） | ✓ | ページタイトル |
| サブタイトル | `subtitle` | 文字列（1行） | - | サブタイトル |
| 本文1 | `content1` | リッチエディタ | - | ページの本文（第1セクション） |
| 本文2 | `content2` | リッチエディタ | - | ページの本文（第2セクション） |
| 本文3 | `content3` | リッチエディタ | - | ページの本文（第3セクション） |
| 公開 | `publish` | チェックボックス | ✓ | 公開環境（開発、本番） |
| 更新日時 | `updatedAt` | 更新日時 | - | 最終更新日時 |
| microCMS ID | `microcms_id` | 文字列（1行） | - | microCMSのID |
| ページID | `id` | 文字列（1行） | ✓ | ページID（自動採番） |

5. 公開フィールドの選択肢を設定：
   - 開発
   - 本番

6. 自動採番プラグインをインストールして、`id`フィールドに自動採番を設定

7. ビューを設定：
   - ビュー名: 「すべて」
   - 表示フィールド: ページ識別子、ページ名、タイトル、公開、更新日時
   - 並び順: ページ識別子の昇順

## 方法2: プログラムで作成

`docs/kintone-fields-news.json` と `docs/kintone-fields-pages.json` を参考に、以下のコマンドでアプリを作成できます：

```bash
node scripts/create-kintone-apps.js
```

**注意**: このスクリプトはkintone REST API Clientを使用しますが、実際のAPI形式に合わせて調整が必要な場合があります。GUIでの手動作成を推奨します。

## 自動採番プラグインの設定

1. kintoneのプラグインストアから自動採番プラグインをインストール
2. アプリの設定 > プラグインでプラグインを有効化
3. フォーム設定で、`id`フィールドに対して自動採番を設定
4. 採番形式を設定（例: 連番、日付+連番など）

## APIトークンの作成

1. kintoneの設定 > アプリ設定 > APIトークン
2. 「APIトークンの生成」をクリック
3. 以下の権限を設定：
   - レコードの閲覧
   - レコードの追加
   - レコードの編集
   - レコードの削除
4. トークンを生成し、`.env.local`に設定

## アプリIDの確認

1. アプリの設定画面を開く
2. URLからアプリIDを確認（例: `https://your-domain.cybozu.com/k/123` の場合、アプリIDは `123`）
3. `.env.local`に設定：
   ```
   KINTONE_NEWS_APP_ID=123
   KINTONE_PAGES_APP_ID=456
   ```

